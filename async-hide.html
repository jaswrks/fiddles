<!DOCTYPE html>
<html>
  <head>
    <title>Async Hide Demo</title>

    <style>
      html { transition: opacity .5s; }
      html.async-hide { opacity: .05 !important; filter: grayscale; }
    </style>

    <script>
    ( function() {
		  var d = document;
		  var de = d.documentElement;
		  var interval, timeout, timeoutTime = 3000;
		  var dl = ( window.dataLayer = window.dataLayer || [] );

		  var stopHiding = function() {
			  dl.hide.end = null;
			  clearTimeout( timeout ), clearInterval( interval );
			  de.className = de.className.replace( /\basync-hide\b/g, '' );
		  };
		  dl.hide = { 'GTM-XXXXXX': true, end: stopHiding, timeout: timeoutTime };

		  de.className += ' async-hide';
		  interval      = setInterval( function() {
			  var cb = d.querySelector( '.a8c-cookie-banner' );
			  if( cb && cb.style.display !== 'none' ) { stopHiding(); }
		  }, 100 );
		  timeout       = setTimeout( stopHiding, timeoutTime );
	} )();
  </script>
  </head>
  <body>
    <img src="https://cdn.svgporn.com/logos/github-icon.svg" style="display: block; margin: 0 auto;" />
    <img src="https://cdn.svgporn.com/logos/github.svg" style="display: block; margin: 0 auto;" />
  </body>
</html>
